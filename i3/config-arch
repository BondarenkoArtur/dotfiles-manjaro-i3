# i3 config file (v4)
# Almost all copied from https://github.com/alexbooker/dotfiles/blob/master/.config/i3/config

# Constants
  set $mod Mod4

  set $black     #000000
  set $bg        #1f2126
  set $bgtrans   #1f2126CC
  set $bglight   #404452
  set $fg        #5F6B85
  set $fglight   #95A2BB
  set $white     #FFFFFF

  set $red     #E06C75
  set $green   #98C379
  set $yellow  #E5C07B
  set $blue    #56B6C2
  set $magenta #C678DD
  set $cyan    #61AEEE

  set $workspace1 "1: "
  set $workspace2 "2: "
  set $workspace3 "3: "
  set $workspace4 "4: "
  set $workspace5 "5: "
  set $workspace6 "6: "
  set $workspace7 "7: "
  set $workspace8 "8: "
  set $workspace9 "9: "
  set $workspace10 "10: "

  set $macbook "eDP1"
  set $external1 "DP1"
  set $external2 "DP2"

  set $default_gaps_inner 10
  set $default_gaps_outer 5
  gaps inner $default_gaps_inner
  gaps outer $default_gaps_outer

# General Configuration
  font pango: Droid Sans 9
  floating_modifier $mod
  #hide_edge_borderTs both
  #smart_borders on
  focus_on_window_activation focus
  force_display_urgency_hint 1000 ms
  workspace_auto_back_and_forth yes

# force remove titlebars for gaps to work correctly
  new_window pixel
  for_window [class="^.*"] border pixel 2

  # Restart-Related Bindings
  bindsym $mod+Shift+c reload
  bindsym $mod+Shift+r restart

  # Program-Related Bindings
  bindsym $mod+Return exec --no-startup-id i3-sensible-terminal
  bindsym $mod+Shift+Return exec --no-startup-id $editor --name __scratchpad

  # start program launcher
  bindsym $mod+d exec --no-startup-id dmenu_recency
  # launch categorized menu
  bindsym $mod+z exec --no-startup-id morc_menu

  bindsym $mod+Shift+e exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -b 'Yes, exit i3' 'i3-msg exit'"

  ################################################################################################
  ## sound-section - DO NOT EDIT if you wish to automatically upgrade Alsa -> Pulseaudio later! ##
  ################################################################################################

  exec --no-startup-id volumeicon
  bindsym $mod+Ctrl+m exec terminal -e 'alsamixer'
  #exec --no-startup-id pulseaudio
  #exec --no-startup-id pa-applet
  #bindsym $mod+Ctrl+m exec pavucontrol

  # Start Applications
  bindsym $mod+Ctrl+b exec terminal -e 'bmenu'
  bindsym $mod+F2 exec palemoon
  bindsym $mod+F3 exec pcmanfm
  # bindsym $mod+F3 exec ranger
  bindsym $mod+Shift+F3 exec gksu pcmanfm
  bindsym $mod+F5 exec terminal -e 'mocp'
  bindsym $mod+t exec --no-startup-id pkill compton
  bindsym $mod+Ctrl+t exec --no-startup-id compton -b
  bindsym $mod+Shift+d --release exec "killall dunst; exec notify-send 'restart dunst'"
  bindsym Print exec --no-startup-id i3-scrot
  bindsym $mod+Print --release exec --no-startup-id i3-scrot -w
  bindsym $mod+Shift+Print --release exec --no-startup-id i3-scrot -s
  bindsym $mod+Ctrl+x --release exec --no-startup-id xkill

  # Scratchpad
  bindsym $mod+Shift+minus move scratchpad
  bindsym $mod+Shift+plus scratchpad show

# Window-Related Bindings
  bindsym $mod+x kill

# Focus Bindings
  bindsym $mod+h focus left
  bindsym $mod+j focus down
  bindsym $mod+k focus up
  bindsym $mod+l focus right
  bindsym $mod+Left focus left
  bindsym $mod+Down focus down
  bindsym $mod+Up focus up
  bindsym $mod+Right focus right

# Move Bindings
  bindsym $mod+Shift+h move left
  bindsym $mod+Shift+j move down
  bindsym $mod+Shift+k move up
  bindsym $mod+Shift+l move right
  bindsym $mod+Shift+Left move left
  bindsym $mod+Shift+Down move down
  bindsym $mod+Shift+Up move up
  bindsym $mod+Shift+Right move right

# Floating Bindings
  bindsym $mod+space focus mode_toggle
  bindsym $mod+Shift+space floating toggle
  bindsym $mod+f fullscreen toggle

# Sticky Bindings
  bindsym $mod+Shift+s sticky toggle
  # put YouTube into fullscreen and execute this for media mode
  bindsym $mod+y fullscreen disable; floating enable; resize set 400 300; sticky enable; move window to position 2140 20

# Layout Bindings
  bindsym $mod+s layout stacking
  bindsym $mod+w layout tabbed
  bindsym $mod+e layout toggle split

# Split Bindings
  bindsym $mod+b split h;exec notify-send 'tile horizontally'
  bindsym $mod+v split v;exec notify-send 'tile vertically'

# Parent-Child Bingings
  bindsym $mod+a focus parent
  bindsym $mod+Shift+a focus child

# Mode Resize
  set $mode_resize "  "
  bindsym $mod+r mode $mode_resize
  mode $mode_resize {
    bindsym h resize shrink width 10 px or 10 ppt
    bindsym j resize grow height 10 px or 10 ppt
    bindsym k resize shrink height 10 px or 10 ppt
    bindsym l resize grow width 10 px or 10 ppt

    bindsym Left resize shrink width 10 px or 10 ppt
    bindsym Down resize grow height 10 px or 10 ppt
    bindsym Up resize shrink height 10 px or 10 ppt
    bindsym Right resize grow width 10 px or 10 ppt

    bindsym 1 mode "default", resize set 1000 600
    bindsym 2 mode "default", resize set 1500 500
    bindsym 3 mode "default", resize set 1200 1000

    bindsym Escape mode "default"
    bindsym Return mode "default"
  }

# Mode Gaps
  set $mode_gaps "gaps [o]uter [i]nner [d]efault [0]"
  set $mode_gaps_outer "outer gaps [+] [-] [d]efault [0]"
  set $mode_gaps_inner "inner gaps [+] [-] [d]efault [0]"
  bindsym $mod+Shift+g mode $mode_gaps
  mode $mode_gaps {
    bindsym o      mode $mode_gaps_outer
    bindsym i      mode $mode_gaps_inner

    bindsym 0      mode "default", exec --no-startup-id i3-msg "gaps inner current set 0" && i3-msg "gaps outer current set 0"
    bindsym d      mode "default", exec --no-startup-id i3-msg "gaps inner current set $default_gaps_inner" && i3-msg "gaps outer current set $default_gaps_outer"

    bindsym Return mode "default"
    bindsym Escape mode "default"
  }

mode $mode_gaps_inner {
    bindsym plus  gaps inner current plus 5
    bindsym minus gaps inner current minus 5
    bindsym 0     mode "default", gaps inner current set 0
    bindsym d     mode "default", gaps inner current set $default_gaps_inner

    bindsym Shift+plus  gaps inner all plus 5
    bindsym Shift+minus gaps inner all minus 5
    bindsym Shift+0     mode "default", gaps inner all set 0
    bindsym Shift+d     mode "default", gaps inner all set $default_gaps_inner

    bindsym Return mode "default"
    bindsym Escape mode "default"
}

mode $mode_gaps_outer {
    bindsym plus  gaps outer current plus 5
    bindsym minus gaps outer current minus 5
    bindsym 0     mode "default", gaps outer current set 0
    bindsym d     mode "default", gaps outer current set $default_gaps_outer

    bindsym Shift+plus  gaps outer all plus 5
    bindsym Shift+minus gaps outer all minus 5
    bindsym Shift+0     mode "default", gaps outer all set 0
    bindsym Shift+d     mode "default", gaps outer all set $default_gaps_outer

    bindsym Return mode "default"
    bindsym Escape mode "default"
}

# Mode Keyboard Layout Switch
  set $keyboardMode " [f]r [e]n"
  bindsym $mod+Escape mode $keyboardMode
  mode $keyboardMode {
    bindsym f exec "setxkbmap ca multi", mode "default"
    bindsym e exec "setxkbmap us", mode "default"
    # back to normal: Enter or Escape
    bindsym Return mode "default"
    bindsym Escape mode "default"
  }

# Mode Power
set $mode_power "power: [l]ock [e]logout [s]uspend [h]ibernate [r]eboot [s]hutdown"
  bindsym Mod1+Control+l mode $mode_power
  mode --pango_markup $mode_power {
    bindsym l mode "default", exec --no-startup-id blurlock
    bindsym e mode "default", exec --no-startup-id $HOME/.i3/i3exit logout
    bindsym s mode "default", exec --no-startup-id $HOME/.i3/i3exit suspend
    bindsym h mode "default", exec --no-startup-id $HOME/.i3/i3exit hibernate
    bindsym r mode "default", exec --no-startup-id $HOME/.i3/i3exit reboot
    bindsym p mode "default", exec --no-startup-id $HOME/.i3/i3exit shutdown

    bindsym Return mode "default"
    bindsym Escape mode "default"
  }

# Volume & Media Bindings
  bindsym XF86MonBrightnessDown exec --no-startup-id xbacklight -dec 10
  bindsym XF86MonBrightnessUp exec --no-startup-id xbacklight -inc 10
  bindsym XF86KbdBrightnessDown exec --no-startup-id kbdlight down 10
  bindsym XF86KbdBrightnessUp exec --no-startup-id kbdlight up 10
  bindsym XF86AudioLowerVolume exec --no-startup-id pulseaudio-ctl down
  bindsym XF86AudioRaiseVolume exec --no-startup-id pulseaudio-ctl up
  bindsym XF86AudioMute exec --no-startup-id pulseaudio-ctl mute
  bindsym XF86AudioPlay exec playerctl play-pause
  bindsym XF86AudioPause exec playerctl pause
  bindsym XF86AudioNext exec playerctl next
  bindsym XF86AudioPrev exec playerctl previous

# Workspace-Related Bindings
  bindsym $mod+1 workspace $workspace1
  bindsym $mod+2 workspace $workspace2
  bindsym $mod+3 workspace $workspace3
  bindsym $mod+4 workspace $workspace4
  bindsym $mod+5 workspace $workspace5
  bindsym $mod+6 workspace $workspace6
  bindsym $mod+7 workspace $workspace7
  bindsym $mod+8 workspace $workspace8
  bindsym $mod+9 workspace $workspace9
  bindsym $mod+0 workspace $workspace10
  bindsym $mod+Tab workspace back_and_forth

  # Move focused container to workspace
  bindsym $mod+Ctrl+1 move container to workspace $workspace1
  bindsym $mod+Ctrl+2 move container to workspace $workspace2
  bindsym $mod+Ctrl+3 move container to workspace $workspace3
  bindsym $mod+Ctrl+4 move container to workspace $workspace4
  bindsym $mod+Ctrl+5 move container to workspace $workspace5
  bindsym $mod+Ctrl+6 move container to workspace $workspace6
  bindsym $mod+Ctrl+7 move container to workspace $workspace7
  bindsym $mod+Ctrl+8 move container to workspace $workspace8

  # Move to workspace with focused container
  bindsym $mod+Shift+1 move container to workspace $workspace1; workspace $workspace1
  bindsym $mod+Shift+2 move container to workspace $workspace2; workspace $workspace2
  bindsym $mod+Shift+3 move container to workspace $workspace3; workspace $workspace3
  bindsym $mod+Shift+4 move container to workspace $workspace4; workspace $workspace4
  bindsym $mod+Shift+5 move container to workspace $workspace5; workspace $workspace5
  bindsym $mod+Shift+6 move container to workspace $workspace6; workspace $workspace6
  bindsym $mod+Shift+7 move container to workspace $workspace7; workspace $workspace7
  bindsym $mod+Shift+8 move container to workspace $workspace8; workspace $workspace8


# Workspace Monitors
  workspace $workspace1 output $monitor1
  workspace $workspace2 output $monitor1
  workspace $workspace3 output $monitor1
  workspace $workspace4 output $monitor1
  workspace $workspace5 output $monitor1
  workspace $workspace6 output $monitor2
  workspace $workspace7 output $monitor2
  workspace $workspace8 output $monitor2
  workspace $workspace9 output $monitor2
  workspace $workspace10 output $monitor2

# Assignements
  assign [class="Firefox"] $workspace2
  assign [class="Chromium"] $workspace2
  assign [class="Gedit"] $workspace3
  assign [class="Atom"] $workspace3
  assign [class="wmail"] $workspace4
  # Spotify class assignement bugs forces me to move window instead
  for_window [class="Spotify"] move to workspace $workspace8
  for_window [class="Slack"] move to workspace $workspace9

# Windows Management
  for_window [title="alsamixer"] floating enable
  for_window [class="Calamares"] floating enable
  for_window [class="Clipgrab"] floating enable
  for_window [title="File Transfer*"] floating enable
  for_window [class="Galculator"] floating enable
  for_window [class="GParted"] floating enable
  for_window [title="i3_help"] floating enable sticky enable
  for_window [class="Lightdm-gtk-greeter-settings"] floating enable
  for_window [class="Lxappearance"] floating enable sticky enable
  for_window [class="Manjaro Settings Manager"] floating enable
  for_window [class="Manjaro Welcome"] floating enable
  for_window [title="MuseScore: Play Panel"] floating enable
  for_window [class="Nitrogen"] floating enable sticky enable
  for_window [class="Oblogout"] fullscreen enable
  for_window [class="octopi"] floating enable
  for_window [class="Pamac-manager"] floating enable
  for_window [class="Pavucontrol"] floating enable
  for_window [class="qt5ct"] floating enable sticky enable
  for_window [class="Qtconfig-qt4"] floating enable sticky enable
  for_window [class="Simple-scan"] floating enable
  for_window [class="(?i)System-config-printer.py"] floating enable
  for_window [class="Skype"] floating enable
  for_window [class="Thus"] floating enable
  for_window [class="Timeset-gui"] floating enable
  for_window [class="(?i)virtualbox"] floating enable
  for_window [class="Xfburn"] floating enable
  for_window [window_role="pop-up"] floating enable
  for_window [window_role="bubble"] floating enable
  for_window [window_role="task_dialog"] floating enable
  for_window [window_role="Preferences"] floating enable
  for_window [window_type="dialog"] floating enable
  for_window [window_type="menu"] floating enable
  for_window [instance="__scratchpad"] floating enable
  for_window [class="Thunar"] floating enable
  for_window [class="Blueman-manager"] floating enable
  for_window [class="Galculator"] floating enable, sticky enable
  for_window [class="(?i)gsimplecal"] floating enable, sticky enable, move position center

  # switch to workspace with urgent window automatically
  for_window [urgent=latest] focus

# Window Colors
#                         border    background text      indicator  child_border
  client.focused_inactive $bg       $bg        $fg       $bglight   $bglight
  client.focused          $cyan    $cyan       $bg       $green     $cyan
  client.unfocused        $bg       $bg        $fg       $bglight   $bglight
  client.urgent           $red      $bg        $fg       $bglight   $red
  client.background       $bg

  # Bar
    bar {
      i3bar_command i3bar -t
      status_command i3blocks -c ~/.i3/i3blocks.conf
      font pango: FontAwesome 9, Droid Sans Bold 10
      position top
      strip_workspace_numbers yes
      tray_output primary
      #bindsym button4 nop
      #bindsym button5 nop
      colors {
        background $bgtrans
        separator $bglight
        statusline $fglight
                         # border   background text
        focused_workspace  $bgtrans $bgtrans   $white
        active_workspace   $bgtrans $bgtrans   $fg
        inactive_workspace $bgtrans $bgtrans   $fg
        urgent_workspace   $bgtrans $bgtrans   $red
        binding_mode       $red     $red       $white
      }
    }

# Autostart applications
exec --no-startup-id /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
exec --no-startup-id nitrogen --restore; sleep 1; compton -b
exec --no-startup-id nm-applet
exec --no-startup-id xfce4-power-manager
exec --no-startup-id pamac-tray
exec --no-startup-id clipit
exec --no-startup-id blueman
# exec_always --no-startup-id sbxkb
exec --no-startup-id start_conky_maia
# exec --no-startup-id start_conky_green
exec --no-startup-id xautolock -time 10 -locker blurlock
exec --no-startup-id dropbox start
exec --no-startup-id wine "C:\Program Files (x86)\1Password 4\Agile1pAgent.exe"
exec_always --no-startup-id fix_xcursor

# setup monitors
# exec --no-startup-id ../scripts/apple24_only.sh
# exec --no-startup-id dunst &
